📋 v2.5 更新日誌 (Changelog)
介面優化 (Header)：

隱藏日期列：現在只有在「行程 (Plan)」分頁時才會顯示上方的日期切換卡。切換到票券、分帳或翻譯時，日期列會自動隱藏，讓手機螢幕能顯示更多內容。

網頁標題：簡化為「旅遊計畫」。

版本號：移動至側邊選單的最下方。

韓國旅遊神器 (Naver Map 直連)：

當目的地偵測為韓國 (幣別 KRW 或韓文) 時，行程卡片會出現綠色的 N 按鈕。

App 喚醒技術：點擊後會優先嘗試喚醒手機上的 Naver Map App 進行導航 (使用 URL Scheme)。

Fallback 機制：若未安裝 App，系統會在 1.5 秒後自動跳轉至 Naver Map 網頁版 (含防止流量失控的判斷)。

翻譯介面回歸：

恢復 v1 版本的 「三大功能卡片」 設計 (照相翻譯、我說中文、對方說外文)，按鈕更大、更適合旅行中快速點擊。

系統核心升級 (流量與效能)：

智慧寫入鎖 (Smart Save Lock)：導入 JSON 深層比對機制。現在只有當資料 「真的有變動」 時，才會向 Firebase 發送寫入請求。這能徹底解決「已同步」一直閃爍的問題，並大幅節省資料庫讀寫流量。

📋 v2.51 更新日誌
[Fix] 韓國地圖 App 喚醒優化：移除了網頁版自動跳轉機制。現在點擊 N 按鈕只會嘗試喚醒 Naver Map App，避免已安裝 App 的使用者在切換回瀏覽器時誤觸網頁版。

[Fix] 智慧寫入鎖 (Smart Save Lock) 修復：

修正了資料比對邏輯，現在會排除時間戳記 (lastUpdate) 進行比對。

確保只有在行程、費用、設定等實際資料變動時，才會觸發資料庫寫入，徹底解決「未修改卻顯示已同步」的 Bug，並大幅節省 Firebase 流量。

[UI] 版本號更新：側邊選單版本號更新為 v2.51。

📋 v2.52 更新日誌
[Fix] 韓國地圖 (Naver Map) 呼叫方式優化：

棄用複雜的 URL Scheme 喚醒腳本。

改回標準的 HTTPS 連結 (<a> 標籤)。

效果：點擊後行為與 Google Map 一致。若手機有安裝 App，系統通常會自動攔截開啟；若無，則直接開啟網頁版。這解決了「切換視窗後誤觸網頁」的問題，也提升了相容性。

[Fix] 票券夾日期提示：

優化了新增票券的日期輸入框。

預設顯示「選擇日期」提示字 (Type=Text)。

點擊時自動切換為日期選擇器 (Type=Date)，解決手機版預設日期欄位空白不明顯的問題。

[UI] 版本號更新：側邊選單顯示為 v2.52。

📋 v2.6 更新日誌
[Fix] 資料同步與覆蓋問題 (重大修復)：

伺服器狀態鎖 (Server State Lock)：在 loadTripData 時，系統會先記住「這次從伺服器拿到的資料長怎樣」。

寫入前檢查：在嘗試 saveToCloud 寫入之前，系統會再次比對「現在的資料」是否等於「伺服器剛傳來的資料」。如果一樣，代表這是同步進來的變更，絕對禁止寫回資料庫。這能完美解決手機滑動導致電腦資料消失的問題。

[UX] 拖曳操作優化：

手機防誤觸：針對觸控裝置加入了 delay: 200 (200毫秒延遲)。在手機上，您現在需要 「按住行程卡片約 0.2 秒」 才能開始拖曳，這樣就不會跟「滑動頁面」衝突了。

電腦版：維持即點即拖，不受影響。

視覺回饋：按住卡片準備拖曳時，卡片會稍微縮小並改變背景色，提示使用者「已抓取」。

🛠️ v2.61 修復日誌
[Fix] 嚴重錯誤修復：補回了在 v2.6 中意外遺失的 getGoogleMapLink、addItem、fetchWeather 等核心操作函式，解決網頁無法執行的問題。

[Include] v2.6 功能保留：

防回音寫入鎖：防止手機滑動導致電腦資料被舊資料覆蓋。

手機拖曳優化：保留 delay: 150 設定，解決手機上難以拖曳的問題。
